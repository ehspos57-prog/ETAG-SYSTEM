<UserControl x:Class="ETAG_ERP.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             FlowDirection="RightToLeft">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Themes/ModernArabicTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Background="#FAFAFA">
        <StackPanel Margin="20">
            
            <!-- Welcome Section -->
            <Border Style="{StaticResource ModernCard}" Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="مرحباً بك في ETAG ERP" 
                             Style="{StaticResource ArabicHeading1}" 
                             Margin="0,0,0,10"/>
                    <TextBlock Text="نظام إدارة المؤسسات المتكامل - لوحة التحكم الرئيسية" 
                             Style="{StaticResource ArabicBody}" 
                             Foreground="#666"/>
                </StackPanel>
            </Border>

            <!-- KPI Cards Row 1 -->
            <Grid Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Total Sales -->
                <Border Grid.Column="0" Style="{StaticResource ModernCard}" Margin="0,0,10,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,15">
                            <materialDesign:PackIcon Kind="TrendingUp" Width="24" Height="24" Foreground="#4CAF50" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBlock Text="إجمالي المبيعات" Style="{StaticResource ArabicHeading3}"/>
                        </StackPanel>
                        <TextBlock Text="1,250,000" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 Foreground="#4CAF50" 
                                 HorizontalAlignment="Right"
                                 Margin="0,0,0,5"/>
                        <TextBlock Text="ر.س" 
                                 Style="{StaticResource ArabicCaption}" 
                                 HorizontalAlignment="Right"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                            <materialDesign:PackIcon Kind="TrendingUp" Width="16" Height="16" Foreground="#4CAF50" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBlock Text="+12.5%" Style="{StaticResource ArabicCaption}" Foreground="#4CAF50"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Total Customers -->
                <Border Grid.Column="1" Style="{StaticResource ModernCard}" Margin="5,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,15">
                            <materialDesign:PackIcon Kind="AccountGroup" Width="24" Height="24" Foreground="#2196F3" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBlock Text="إجمالي العملاء" Style="{StaticResource ArabicHeading3}"/>
                        </StackPanel>
                        <TextBlock Text="2,847" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 Foreground="#2196F3" 
                                 HorizontalAlignment="Right"
                                 Margin="0,0,0,5"/>
                        <TextBlock Text="عميل" 
                                 Style="{StaticResource ArabicCaption}" 
                                 HorizontalAlignment="Right"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                            <materialDesign:PackIcon Kind="TrendingUp" Width="16" Height="16" Foreground="#4CAF50" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBlock Text="+8.2%" Style="{StaticResource ArabicCaption}" Foreground="#4CAF50"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Total Orders -->
                <Border Grid.Column="2" Style="{StaticResource ModernCard}" Margin="5,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,15">
                            <materialDesign:PackIcon Kind="Receipt" Width="24" Height="24" Foreground="#FF9800" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBlock Text="إجمالي الطلبات" Style="{StaticResource ArabicHeading3}"/>
                        </StackPanel>
                        <TextBlock Text="1,456" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 Foreground="#FF9800" 
                                 HorizontalAlignment="Right"
                                 Margin="0,0,0,5"/>
                        <TextBlock Text="طلب" 
                                 Style="{StaticResource ArabicCaption}" 
                                 HorizontalAlignment="Right"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                            <materialDesign:PackIcon Kind="TrendingUp" Width="16" Height="16" Foreground="#4CAF50" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBlock Text="+15.3%" Style="{StaticResource ArabicCaption}" Foreground="#4CAF50"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Inventory Value -->
                <Border Grid.Column="3" Style="{StaticResource ModernCard}" Margin="10,0,0,0">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,15">
                            <materialDesign:PackIcon Kind="Package" Width="24" Height="24" Foreground="#9C27B0" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBlock Text="قيمة المخزون" Style="{StaticResource ArabicHeading3}"/>
                        </StackPanel>
                        <TextBlock Text="850,000" 
                                 FontSize="32" 
                                 FontWeight="Bold" 
                                 Foreground="#9C27B0" 
                                 HorizontalAlignment="Right"
                                 Margin="0,0,0,5"/>
                        <TextBlock Text="ر.س" 
                                 Style="{StaticResource ArabicCaption}" 
                                 HorizontalAlignment="Right"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
                            <materialDesign:PackIcon Kind="TrendingDown" Width="16" Height="16" Foreground="#F44336" VerticalAlignment="Center" Margin="0,0,5,0"/>
                            <TextBlock Text="-2.1%" Style="{StaticResource ArabicCaption}" Foreground="#F44336"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Charts and Analytics Row -->
            <Grid Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Sales Chart -->
                <Border Grid.Column="0" Style="{StaticResource ModernCard}" Margin="0,0,10,0">
                    <StackPanel>
                        <TextBlock Text="مبيعات الشهر الحالي" Style="{StaticResource ArabicHeading2}" Margin="0,0,0,20"/>
                        <Border Background="#F8F9FA" CornerRadius="8" Height="300" Padding="20">
                            <Grid>
                                <!-- Chart placeholder - would be replaced with actual chart control -->
                                <TextBlock Text="📊 مخطط المبيعات" 
                                         FontSize="48" 
                                         HorizontalAlignment="Center" 
                                         VerticalAlignment="Center"
                                         Foreground="#666"/>
                                <TextBlock Text="سيتم عرض مخطط المبيعات التفاعلي هنا" 
                                         Style="{StaticResource ArabicCaption}" 
                                         HorizontalAlignment="Center" 
                                         VerticalAlignment="Bottom"
                                         Margin="0,0,0,20"/>
                            </Grid>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- Quick Stats -->
                <Border Grid.Column="1" Style="{StaticResource ModernCard}">
                    <StackPanel>
                        <TextBlock Text="إحصائيات سريعة" Style="{StaticResource ArabicHeading2}" Margin="0,0,0,20"/>
                        
                        <!-- Today's Sales -->
                        <Border Background="#E8F5E8" CornerRadius="6" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="مبيعات اليوم" Style="{StaticResource ArabicBody}" FontWeight="SemiBold"/>
                                <TextBlock Text="45,000 ر.س" FontSize="18" FontWeight="Bold" Foreground="#4CAF50" HorizontalAlignment="Right"/>
                            </StackPanel>
                        </Border>

                        <!-- Pending Orders -->
                        <Border Background="#FFF3E0" CornerRadius="6" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="طلبات معلقة" Style="{StaticResource ArabicBody}" FontWeight="SemiBold"/>
                                <TextBlock Text="23 طلب" FontSize="18" FontWeight="Bold" Foreground="#FF9800" HorizontalAlignment="Right"/>
                            </StackPanel>
                        </Border>

                        <!-- Low Stock Items -->
                        <Border Background="#FFEBEE" CornerRadius="6" Padding="15" Margin="0,0,0,10">
                            <StackPanel>
                                <TextBlock Text="أصناف منخفضة المخزون" Style="{StaticResource ArabicBody}" FontWeight="SemiBold"/>
                                <TextBlock Text="7 أصناف" FontSize="18" FontWeight="Bold" Foreground="#F44336" HorizontalAlignment="Right"/>
                            </StackPanel>
                        </Border>

                        <!-- Active Users -->
                        <Border Background="#E3F2FD" CornerRadius="6" Padding="15">
                            <StackPanel>
                                <TextBlock Text="مستخدمين نشطين" Style="{StaticResource ArabicBody}" FontWeight="SemiBold"/>
                                <TextBlock Text="4 مستخدم" FontSize="18" FontWeight="Bold" Foreground="#2196F3" HorizontalAlignment="Right"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Recent Activities and Quick Actions -->
            <Grid Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Recent Activities -->
                <Border Grid.Column="0" Style="{StaticResource ModernCard}" Margin="0,0,10,0">
                    <StackPanel>
                        <TextBlock Text="الأنشطة الأخيرة" Style="{StaticResource ArabicHeading2}" Margin="0,0,0,20"/>
                        
                        <StackPanel>
                            <!-- Activity 1 -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="15" Margin="0,0,0,10">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Receipt" Width="20" Height="20" Foreground="#4CAF50" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <StackPanel>
                                        <TextBlock Text="فاتورة جديدة #INV-2024-001" Style="{StaticResource ArabicBody}" FontWeight="SemiBold"/>
                                        <TextBlock Text="منذ 5 دقائق" Style="{StaticResource ArabicCaption}" Foreground="#666"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Activity 2 -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="15" Margin="0,0,0,10">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="AccountPlus" Width="20" Height="20" Foreground="#2196F3" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <StackPanel>
                                        <TextBlock Text="عميل جديد: شركة التقنية المتقدمة" Style="{StaticResource ArabicBody}" FontWeight="SemiBold"/>
                                        <TextBlock Text="منذ 15 دقيقة" Style="{StaticResource ArabicCaption}" Foreground="#666"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Activity 3 -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="15" Margin="0,0,0,10">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Package" Width="20" Height="20" Foreground="#FF9800" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <StackPanel>
                                        <TextBlock Text="تحديث مخزون: مضخة هيدروليكية" Style="{StaticResource ArabicBody}" FontWeight="SemiBold"/>
                                        <TextBlock Text="منذ 30 دقيقة" Style="{StaticResource ArabicCaption}" Foreground="#666"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>

                            <!-- Activity 4 -->
                            <Border Background="#F8F9FA" CornerRadius="6" Padding="15">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Cash" Width="20" Height="20" Foreground="#9C27B0" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                    <StackPanel>
                                        <TextBlock Text="دفعة مستلمة: 25,000 ر.س" Style="{StaticResource ArabicBody}" FontWeight="SemiBold"/>
                                        <TextBlock Text="منذ ساعة" Style="{StaticResource ArabicCaption}" Foreground="#666"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Quick Actions -->
                <Border Grid.Column="1" Style="{StaticResource ModernCard}">
                    <StackPanel>
                        <TextBlock Text="إجراءات سريعة" Style="{StaticResource ArabicHeading2}" Margin="0,0,0,20"/>
                        
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- New Invoice -->
                            <Button Grid.Row="0" Grid.Column="0" 
                                  Style="{StaticResource ModernPrimaryButton}" 
                                  Margin="0,0,5,5"
                                  Click="NewInvoice_Click">
                                <StackPanel>
                                    <materialDesign:PackIcon Kind="Receipt" Width="32" Height="32" Foreground="White" HorizontalAlignment="Center"/>
                                    <TextBlock Text="فاتورة جديدة" Foreground="White" FontSize="12" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- New Customer -->
                            <Button Grid.Row="0" Grid.Column="1" 
                                  Style="{StaticResource ModernSecondaryButton}" 
                                  Margin="5,0,0,5"
                                  Click="NewCustomer_Click">
                                <StackPanel>
                                    <materialDesign:PackIcon Kind="AccountPlus" Width="32" Height="32" Foreground="#2E7D32" HorizontalAlignment="Center"/>
                                    <TextBlock Text="عميل جديد" Foreground="#2E7D32" FontSize="12" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- New Item -->
                            <Button Grid.Row="1" Grid.Column="0" 
                                  Style="{StaticResource ModernSecondaryButton}" 
                                  Margin="0,5,5,0"
                                  Click="NewItem_Click">
                                <StackPanel>
                                    <materialDesign:PackIcon Kind="PackagePlus" Width="32" Height="32" Foreground="#2E7D32" HorizontalAlignment="Center"/>
                                    <TextBlock Text="صنف جديد" Foreground="#2E7D32" FontSize="12" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                                </StackPanel>
                            </Button>

                            <!-- Reports -->
                            <Button Grid.Row="1" Grid.Column="1" 
                                  Style="{StaticResource ModernSecondaryButton}" 
                                  Margin="5,5,0,0"
                                  Click="Reports_Click">
                                <StackPanel>
                                    <materialDesign:PackIcon Kind="ChartLine" Width="32" Height="32" Foreground="#2E7D32" HorizontalAlignment="Center"/>
                                    <TextBlock Text="التقارير" Foreground="#2E7D32" FontSize="12" HorizontalAlignment="Center" Margin="0,5,0,0"/>
                                </StackPanel>
                            </Button>
                        </Grid>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- System Status -->
            <Border Style="{StaticResource ModernCard}">
                <StackPanel>
                    <TextBlock Text="حالة النظام" Style="{StaticResource ArabicHeading2}" Margin="0,0,0,20"/>
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Database Status -->
                        <StackPanel Grid.Column="0" HorizontalAlignment="Center">
                            <Ellipse Style="{StaticResource StatusIndicator}" Width="16" Height="16" Margin="0,0,0,10"/>
                            <TextBlock Text="قاعدة البيانات" Style="{StaticResource ArabicBody}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            <TextBlock Text="متصل" Style="{StaticResource ArabicCaption}" Foreground="#4CAF50" HorizontalAlignment="Center"/>
                        </StackPanel>

                        <!-- Network Status -->
                        <StackPanel Grid.Column="1" HorizontalAlignment="Center">
                            <Ellipse Style="{StaticResource StatusIndicator}" Width="16" Height="16" Margin="0,0,0,10"/>
                            <TextBlock Text="الشبكة" Style="{StaticResource ArabicBody}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            <TextBlock Text="متصل" Style="{StaticResource ArabicCaption}" Foreground="#4CAF50" HorizontalAlignment="Center"/>
                        </StackPanel>

                        <!-- Backup Status -->
                        <StackPanel Grid.Column="2" HorizontalAlignment="Center">
                            <Ellipse Style="{StaticResource StatusIndicator}" Width="16" Height="16" Margin="0,0,0,10"/>
                            <TextBlock Text="النسخ الاحتياطي" Style="{StaticResource ArabicBody}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            <TextBlock Text="محدث" Style="{StaticResource ArabicCaption}" Foreground="#4CAF50" HorizontalAlignment="Center"/>
                        </StackPanel>

                        <!-- Security Status -->
                        <StackPanel Grid.Column="3" HorizontalAlignment="Center">
                            <Ellipse Style="{StaticResource StatusIndicator}" Width="16" Height="16" Margin="0,0,0,10"/>
                            <TextBlock Text="الأمان" Style="{StaticResource ArabicBody}" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                            <TextBlock Text="آمن" Style="{StaticResource ArabicCaption}" Foreground="#4CAF50" HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</UserControl>